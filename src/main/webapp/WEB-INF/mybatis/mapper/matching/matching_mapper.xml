<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
						"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="matching_mapper">

<!-- 전체 매칭 로그 리스트, 페이징 처리 포함 -->
	<select id="select_matching_log_list" parameterType="hashMap" resultType="MatchingDto">
		select * from(
			select *
			from  matching_m order by matching_number desc
        ) offset #{displayPost} rows fetch first #{postNum} rows only
	</select>
	
<!-- 시니어 아이디의 매칭 로그 리스트 -->
	<select id="select_matching_log_list_by_snrId"
		parameterType="MatchingDto" resultType="MatchingDto">
		select * from matching_m
		where snr_id = #{snrId}
	</select> 

<!-- 부모 아이디의 매칭 로그 리스트 -->
	<select id="select_matching_log_list_by_parId"
		parameterType="MatchingDto" resultType="MatchingDto">
		select * from matching_m
		where par_id = #{parId}
	</select>

<!-- 매칭 디테일 (동행 종료 여부 확인용) -->
	<select id="select_matching_detail_by_matching_num"
		parameterType="MatchingDetailDto" resultType="MatchingDetailDto">
		select * from matching_d
		where matching_number = #{matchingNumber}
	</select>
	
	<select id="select_matching_count" resultType="int">
		select count(matching_number) from matching_m
	</select>

</mapper>
